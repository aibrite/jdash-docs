<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://doc.jdash.io/backend/aspnet-mvc-dev/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Asp.Net MVC Development - JDash</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet'
        type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin'
            rel='stylesheet' type='text/css'>
            <link href="../../css/base.css" rel="stylesheet">
            <link href="../../css/cinder.css" rel="stylesheet">
            <link rel="stylesheet" href="../../css/highlight.css">

            <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
            <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

            <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
            <script>
                WebFont.load({
                    google: {
                        families: ['Open Sans', 'PT Sans']
                    }
                });
            </script>

            
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">JDash</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Client Development <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../client/">Client Home</a>
</li>

                        
                            
<li >
    <a href="../../client/getting-started/">Getting Started</a>
</li>

                        
                            
<li >
    <a href="../../client/basic-concepts/">Basic Concepts</a>
</li>

                        
                            
<li >
    <a href="../../client/working-with-providers/">Providers</a>
</li>

                        
                            
<li >
    <a href="../../client/working-with-dashboards/">Working with Dashboards</a>
</li>

                        
                            
<li >
    <a href="../../client/dashlet-development/">Dashlet Development</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Backend Development <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../">Backend Home</a>
</li>

                        
                            
<li >
    <a href="../nodejs-dev/">NodeJS Development</a>
</li>

                        
                            
<li class="active">
    <a href="./">Asp.Net MVC Development</a>
</li>

                        
                            
<li >
    <a href="../net-core-dev/">.Net Core Development</a>
</li>

                        
                            
<li >
    <a href="../jdash-cloud/">JDash Cloud</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../nodejs-dev/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../net-core-dev/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#aspnet-mvc-development">Asp.Net MVC Development</a></li>
        
            <li class="second-level"><a href="#step-1-add-jdashnetframework-references">Step 1 : Add JDash.NetFramework references</a></li>
            
        
            <li class="second-level"><a href="#step-2-implement-configuration-class">Step 2: Implement configuration class</a></li>
            
        
            <li class="second-level"><a href="#step-3-registering-jdash-api-endpoints">Step 3: Registering JDash Api endpoints</a></li>
            
        
            <li class="second-level"><a href="#step-4-client-side-development">Step 4: Client side development</a></li>
            
                <li class="third-level"><a href="#step-5-develop-your-first-dashlet">Step 5: Develop your first dashlet</a></li>
            
                <li class="third-level"><a href="#step-6-create-and-display-dashboard">Step 6: Create and display dashboard</a></li>
            
                <li class="third-level"><a href="#step-7-view-dashboards">Step 7: View dashboards</a></li>
            
        
            <li class="second-level"><a href="#step-8-run-your-application">Step 8: Run your application</a></li>
            
                <li class="third-level"><a href="#step-10-download-source-code">Step 10: Download source code</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="aspnet-mvc-development">Asp.Net MVC Development</h1>
<p>This article is about installing and using JDash Asp.Net MVC libraries on your backend. In this section, you can find how to implement .NetFramework 4.5.2 to your backend server.</p>
<p>If you would like to use JDash Cloud to store and manage dashboard related data you can continue from <a href="../../client/getting-started/">Getting Started</a> section.</p>
<h2 id="step-1-add-jdashnetframework-references">Step 1 : Add JDash.NetFramework references</h2>
<p>Use File | New Project | Asp.Net Web Application menu to create an empty project.</p>
<p>Use NuGet Package Manager Console window to add JDash .NetFramework library references to your project.  </p>
<pre><code class="no-highlight">Install-Package JDash.NetFramework.Api
Install-Package JDash.NetFramework.Provider.MsSQL
Install-Package JDash.NetFramework.Provider.MySQL 
</code></pre>

<h2 id="step-2-implement-configuration-class">Step 2: Implement configuration class</h2>
<p>JDash .NetFramework uses a configuration class, in order to configure authentication and provider settings. </p>
<p>Below is a sample configuration class.</p>
<p>Create a new file called <code>JDashConfig.cs</code> and paste the below content inside.</p>
<pre><code class="csharp">
using JDash.NetFramework.Api;
using JDash.NetFramework.Models; 

    public class JDashConfig : BaseJDashConfigurator
    {

        public JDashConfig(JRequestWrapper request) : base(context)
        {
        }

        // Use this method to get current user for current request.
        public override JDashPrincipal GetPrincipal()
        {
            return new JDashPrincipal(&quot;user name&quot;);
        }

        // Jdash library calls this method 
        // to get a provider instance.
        public override IJDashProvider GetProvider()
        {
            // Ensure you have a valid database.

            //string msSqlConnStr = &quot;Data Source=.;Initial Catalog=DemoJDash;Integrated Security=SSPI;&quot;;
            //return new JDash.NetFramework.Provider.MsSQL.JSQLProvider(msSqlConnStr);

            // if you are using MySql uncomment below lines.
            string mySqlConnStr = &quot;Server=127.0.01;Database=jdash;Uid=root;Pwd=1;&quot;;
            return new JDash.NetFramework.Provider.MySQL.JMySQLProvider(mySqlConnStr);

        }
    }

</code></pre>

<h2 id="step-3-registering-jdash-api-endpoints">Step 3: Registering JDash Api endpoints</h2>
<p>Open <code>Global.asax.cs</code> and paste below namespaces first. This will add extension methods.</p>
<pre><code class="csharp">using JDash.NetFramework.Api; 
using JDash.NetFramework.Models;
</code></pre>

<p>Locate <code>Application_Start</code> method in your <code>Global.asax.cs</code> file and replace it as below.</p>
<pre><code class="csharp">  protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);

             //this line will bind jdash routes
            JDash.NetFramework.Api.Routing.Configurator.UseJDash&lt;JDashConfig&gt;();

            BundleConfig.RegisterBundles(BundleTable.Bundles);
        }

</code></pre>

<h2 id="step-4-client-side-development">Step 4: Client side development</h2>
<p>Use <code>npm</code> to install JDash User Interface package. Ensure you are inside root of your project folder (where *.csproj file exists).</p>
<pre><code class="no-highlight">npm install jdash-ui --save
</code></pre>

<p>Note: If this is the first time you use npm to add a package, first execute <code>npm init</code> to create <code>package.json</code> file.</p>
<p>This will create <code>node_modules/jdash-ui</code> folder.</p>
<p>Create index.html inside root folder and paste below code.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1, user-scalable=no&quot; /&gt;
    &lt;title&gt;JDash Tutorial&lt;/title&gt;

    &lt;!-- jdash client library --&gt;
    &lt;script src=&quot;node_modules/jdash-ui/dist/jdash.min.js&quot;&gt;&lt;/script&gt;

    &lt;!-- jdash theme &amp; elements --&gt;
    &lt;link rel=&quot;import&quot; href=&quot;node_modules/jdash-ui/dist/components/jdash.html&quot;&gt;
&lt;/head&gt;

&lt;body class=&quot;j-light-gray j-padding&quot;&gt;

&lt;/body&gt;

&lt;/html&gt;
</code></pre>

<p>For demonstration purposes, we will serve a this static index.html page, to configure your routing just locate your </p>
<p><code>RouteConfig.RegisterRoutes</code> method and replace it like below </p>
<pre><code class="csharp">  public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute(&quot;{resource}.axd/{*pathInfo}&quot;);
            // this line will allow your &quot;/&quot; url will server the index.html page as default page.
            routes.IgnoreRoute(&quot;&quot;);

            routes.MapRoute(
                name: &quot;Default&quot;,
                url: &quot;{controller}/{action}/{id}&quot;,
                defaults: new { controller = &quot;Home&quot;, action = &quot;Index&quot;, id = UrlParameter.Optional }
            );
        }
</code></pre>

<h3 id="step-5-develop-your-first-dashlet">Step 5: Develop your first dashlet</h3>
<p>You use <code>j-dashlet</code> element to define a dashlet. </p>
<p>Content of <code>j-dashlet</code> can include <code>template</code> element which can be used to define dom (innerHTML) of your dashlet. An optional <code>script</code> element inside <code>j-dashlet</code> can be used to execute Javascript for this dashlet. </p>
<p>Copy the following code inside body tag. </p>
<pre><code class="html">&lt;!-- Define &lt;hello-world&gt; dashlet --&gt;
&lt;j-dashlet id=&quot;hello-world&quot; title=&quot;Hello world!&quot;&gt;
    &lt;template&gt;
        &lt;!-- This will be the HTML content of your dashlet  --&gt;
        &lt;h1&gt;&lt;/h1&gt;
    &lt;/template&gt;
    &lt;script&gt;
        jdash.define(function () {

            this.initialized = function () {
                // Dom is ready!
                var h1 = this.querySelector('h1')
                h1.textContent = 'Hello World!';
            }

        })
    &lt;/script&gt;
&lt;/j-dashlet&gt;
</code></pre>

<h3 id="step-6-create-and-display-dashboard">Step 6: Create and display dashboard</h3>
<p>Use <code>j-dashboard</code> element to display a dashboard. </p>
<p>Inside <code>body</code> tag add following code.</p>
<pre><code class="html">    &lt;button id=&quot;createDashboardBtn&quot;&gt;Create Dashboard&lt;/button&gt;
    &lt;button id=&quot;addDashletBtn&quot;&gt;Add Dashlet&lt;/button&gt;
    &lt;div id=&quot;dashboardList&quot;&gt;&lt;/div&gt;

    &lt;j-dashboard id=&quot;dashboard&quot; j-view-mode=&quot;dashletedit&quot;&gt;
        &lt;h2 j-bind=&quot;title&quot;&gt;&lt;/h2&gt;
    &lt;/j-dashboard&gt;
&lt;/body&gt;
</code></pre>

<p>Add a <code>script</code> element after <code>body</code> and paste below code.</p>
<pre><code class="html">&lt;script&gt;
    jdash.ready(function () {

        // Set provider
        jdash.Provider = new jdash.ProviderTypes.OnPremise({ url: '/jdash/api/v1' }); // define your endpoint

        // createDashboardList();
        document.querySelector('#createDashboardBtn').addEventListener('click', function () {
            var title = window.prompt('Set a title for new dashboard');

            // Create a new dashboard
            jdash.Provider.createDashboard({
                title: title
            }).then(function (result) {
                console.log('Dashboard created with id:' + result.id);
                dashboard.load(result.id);
                //createDashboardList();
            }).catch(function (err) {
                alert('There was an error creating dashboard: ' + err.message || err)
            })
        })

        // add hello world dashlet to dashboard
        document.querySelector('#addDashletBtn').addEventListener('click', function (e) {
            dashboard.addDashlet('hello-world');
        })
    })
&lt;/script&gt;
&lt;/body&gt;
</code></pre>

<h3 id="step-7-view-dashboards">Step 7: View dashboards</h3>
<p>As the last step, we will implement the code to view existing dashboards.</p>
<p><code>jdash.Provider.getMyDashboards</code> method returns a list of dashboards current user owns.</p>
<p>Add following function inside <code>script</code> element.</p>
<pre><code class="javascript">function createDashboardList() {
    var container = document.querySelector('#dashboardList');

    // clear existing buttons.
    container.innerHTML = '';
    return jdash.Provider.getMyDashboards().then(function (result) {

        // for each dashboard create a button
        for (var i = 0; i &lt; result.data.length; i++) {
            var btn = document.createElement('button');
            btn.textContent = result.data[i].title;
            btn.id = result.data[i].id;
            container.appendChild(btn);
            btn.addEventListener('click', function (e) {
                var idToLoad = e.target.id;
                dashboard.load(idToLoad);
            })
        }
    })
}
</code></pre>

<p>Note that the <code>createDashboardList()</code> function is commented on Step 6. Uncomment this function after Step 8, so that the when page loads / user creates a new dashboard, dashboard list is updated.</p>
<h2 id="step-8-run-your-application">Step 8: Run your application</h2>
<p>Now run your MVC application and enjoy JDash. </p>
<h3 id="step-10-download-source-code">Step 10: Download source code</h3>
<p>Source code of this guide can be found at this <a href="https://github.com/aibrite/jdash-netframework-tutorial">GitHub Repo</a>.</p>
<p>Also to find more detailed samples about client development see our sample application, you can download source code from our <a target="_blank" href="https://github.com/aibrite/jdash-demo">GitHub Repository</a></p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
            <small>&copy; 2017 <a target="_blank" href="http://jdash.io">JDash</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>
                hljs.initHighlightingOnLoad();
    </script>
    <script>
        var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
